using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Zs.Common.T4Generator;

namespace UnitTest.NETCore
{
    [TestClass]
    public class T4GeneratorTest
    {
        private const string _connectionString = "Host=localhost;Port=5632;Username=postgres;Password=postgres;Database=RobotDb";

        public T4GeneratorTest()
        {
        }

        [TestMethod]
        public void GetDbVersion_Test()
        {
            try
            {
                var version = DbReader.GetVersion(_connectionString);

                Assert.IsNotNull(version);
            }
            catch (Exception ex)
            {
                throw;
            }
        }

        [TestMethod]
        public void GetDbSchemas_Test()
        {
            try
            {
                var dbInfo = DbReader.GetDbInfo(_connectionString);

                Assert.IsNotNull(dbInfo.Count > 0);

            }
            catch (Exception ex)
            {
                throw;
            }
        }

        [TestMethod]
        public void ReadJsonConfiguration_Test()
        {
            var parameterValue = ModelGenerator.GetConfigurationValue(@"M:\Zs.Bot\Zs.Bot\AppSettings.json", "T4_ConnectionString");

            Assert.IsNotNull(parameterValue);
        }
    }
}
