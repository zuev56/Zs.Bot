using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.Logging;
using Zs.Common.Interfaces;

namespace Zs.Bot.Model.Db
{
    public partial class RobotDbContext : DbContext
    {
        private static DbContextOptions<RobotDbContext> _options;
        private static IZsLogger _logger;

        public virtual DbSet<DbSqlResult> SqlResults { get; set; }

        /// <summary> Предоставляет возможность работы с БД, 
        /// используя статические опции, которые должны были быть ранее определены методом Initialize(...) </summary>
        public RobotDbContext()
            : base(_options)
        {
        }

        /// <summary> Инициализация </summary>
        /// <param name="options">Опции, которые будут использоваться при вызове конструктора без параметров</param>
        public static void Initialize(DbContextOptions<RobotDbContext> options, IZsLogger logger)
        {
            _logger = logger;
            _options = options;
        }

        //protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
        //{
        //    optionsBuilder.UseNpgsql(ConnectionString);
        //}
    }
}
