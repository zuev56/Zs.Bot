using System;
using Zs.Bot.Model.Db;

namespace Zs.Bot.Modules.Messaging
{
    /// <summary>
    /// Интерфейс, который определяет методы приёма и передачи сообщений
    /// То, что в будущем будет отделять Telegram, Skype и т.д. от Zs.Bot
    /// </summary>
    public interface IMessenger
    {
        /// <summary> Вызывается после получения сообщения </summary>
        event Action<MessageReceivedEventArgs> MessageReceived;

        /// <summary> Вызывается после отправки сообщения </summary>
        event Action<MessageSentEventArgs> MessageSent;

        /// <summary> Добавление сообщения в очередь на отправку </summary>
        void AddMessageToOutbox(IChat chat, string messageText, string tag = null, int replyToMessageId = -1);

        /// <summary> Добавление сообщения в очередь на отправку </summary>
        void AddMessageToOutbox(string messageText, params string[] userRoleCodes);

        /// <summary> Conversion to general type </summary>
        IReceivedMessage ToGeneralReceivedMessage(object specificMessage);

        /// <summary> Conversion to general type </summary>
        ISentMessage ToGeneralSentMessage(object specificMessage);

        /// <summary> Conversion to general type </summary>
        IChat ToGeneralChat(object specificChat);

        /// <summary> Conversion to general type </summary>
        IUser ToGeneralUser(object specificUser);

    }
}